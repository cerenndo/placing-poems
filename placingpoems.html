<!doctype html>
<html>
  <head>
    <!-- Author: Ceren Dolma -->
    <meta charset="utf-8">
    <title>Placing Poems</title>
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
    crossorigin=""></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

  </head>


<body>

<h1>Placing Poems.</h1>

<div class="topnav">
    <a href="index.html">HOME</a>
    <a href="instructions.html">INSTRUCTIONS</a>
    <a class="active" href="placingpoems.html">THE MAP</a>
    <a href="contact.html">CONTACT</a>
</div>

<div id="map">
  <button onclick="showSurvey()" id="submitButton">PLACE YOUR POEM</button>
  <div id="forms"><iframe src="https://docs.google.com/forms/d/e/1FAIpQLScWQDtDbnHfbBVN3edGqSrud-HjV180Db5eOBC9oL8lHEGLoQ/viewform?embedded=true"  frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe> </div>
  </div>


<script>

    var map = L.map('map').setView([53, -5], 7);
    map.options.minZoom = 5;
    
  
    var MapBoxLight = L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoiY2VyZW5kb2xtYSIsImEiOiJjam9vZWZjM2wxaGx3M3Bsc2gya3hlM3ZkIn0.h5NY1p7um8zNKnRHxnVrxQ', {
        maxZoom: 18,
        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, ' +
          'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
        //id: 'cerendolma/cknrm6yvk0w6r17mjae8mdsfi',
        id: 'mapbox/light-v10',

        tileSize: 512,
        zoomOffset: -1
      }).addTo(map);

    var pinkIcon = L.icon({
    iconUrl: 'assets/images/marker.png',
    iconSize:     [60, 60], // size of the icon
    iconAnchor:   [30, 50],
    popupAnchor:  [0, -45] // point from which the popup should open relative to the iconAnchor
  });
  
  // when clicked on map, removes any existing marker and adds new one with lat long information pop-up
    var addedMarker = {};
    map.on("click", function (event) {
    
       if (addedMarker != undefined) {
         map.removeLayer(addedMarker);
        };
    
      addedMarker = L.marker(event.latlng, {icon: pinkIcon}).addTo(map);
      addedMarker.bindPopup('<b>' + "LATITUDE: " + '</b>' + event.latlng.lat + '<br>'+ '<b>' + "LONGITUDE: " + '</b>' + event.latlng.lng).openPopup();
  
  }); 
  
  // when clickedsurvey appeaars
  function showSurvey() {
    event.stopPropagation(); // this line stops the on click function of the map
    var x = document.getElementById("forms");
    if (x.style.display === "block") {
      x.style.display = "none";
      document.getElementById("submitButton").innerHTML = "PLACE YOUR POEM";
    } else {
      x.style.display = "block";
      document.getElementById("submitButton").innerHTML = "CLOSE";
    }
  }



    
</script>

</body>

</html>